<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§˜ä»ªå½• Â· CoC è§’è‰²å¡å·¥åŠ</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Cg fill='none' stroke='%23d68f3e' stroke-width='2'%3E%3Ccircle cx='32' cy='32' r='22'/%3E%3Cpath d='M32%2010v12m0%2020v12M10%2032h12m20%200h12M18%2018l8%208m10%2010%2010%2010M18%2046l8-8m10-10%2010-10'/%3E%3C/g%3E%3Ccircle cx='32' cy='32' r='4' fill='%23f1c27d'/%3E%3C/svg%3E">
    <meta name="theme-color" content="#070b16">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=Cardo:ital,wght@0,400;0,700;1,400&display=swap');

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-deep: #070b16;
            --bg-mid: rgba(17, 22, 37, 0.8);
            --bg-soft: rgba(25, 32, 50, 0.7);
            --accent: #d68f3e;
            --accent-strong: #f1c27d;
            --highlight: #6d9dc5;
            --text-primary: #e6e1d8;
            --text-muted: #b8b0a5;
            --border-glow: rgba(198, 140, 82, 0.4);
            --card-border: rgba(129, 148, 197, 0.45);
            --shadow-strong: rgba(0, 0, 0, 0.55);
        }

        body {
            font-family: 'Cardo', 'Noto Serif SC', serif;
            background: radial-gradient(circle at 20% 20%, rgba(63, 94, 251, 0.08), transparent 45%), radial-gradient(circle at 80% 10%, rgba(252, 70, 107, 0.12), transparent 50%), radial-gradient(circle at 50% 80%, rgba(112, 244, 174, 0.1), transparent 55%), var(--bg-deep);
            color: var(--text-primary);
            min-height: 100vh;
            padding: 20px;
            position: relative;
            overflow-x: hidden;
        }

        body::before,
        body::after {
            content: '';
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: -2;
        }

        body::before {
            background: radial-gradient(circle at 30% 30%, rgba(109, 157, 197, 0.25), transparent 55%), radial-gradient(circle at 70% 60%, rgba(214, 143, 62, 0.18), transparent 60%);
            opacity: 0.4;
            animation: aurora 28s linear infinite alternate;
        }

        body::after {
            background-image: radial-gradient(rgba(255, 255, 255, 0.05) 1px, transparent 1px);
            background-size: 80px 80px;
            mix-blend-mode: screen;
            opacity: 0.35;
        }

        .background-sigil {
            position: fixed;
            inset: 0;
            pointer-events: none;
            z-index: -1;
            background-image:
                radial-gradient(circle at center, rgba(214, 143, 62, 0.32) 0%, rgba(214, 143, 62, 0.08) 38%, transparent 68%),
                url('data:image/svg+xml,%3Csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20viewBox=%270%200%20400%20400%27%3E%3Cg%20fill=%27none%27%20stroke=%27%23d68f3e%27%20stroke-width=%274%27%20opacity=%270.55%27%3E%3Ccircle%20cx=%27200%27%20cy=%27200%27%20r=%27160%27/%3E%3Ccircle%20cx=%27200%27%20cy=%27200%27%20r=%27110%27/%3E%3Cpath%20d=%27M200%2040L330%20320H70L200%2040z%27/%3E%3Cpath%20d=%27M200%20360L280%20200L120%20200L200%20360z%27/%3E%3Cpath%20d=%27M40%20200H360%27/%3E%3Cpath%20d=%27M200%2040V360%27/%3E%3C/g%3E%3Ccircle%20cx=%27200%27%20cy=%27200%27%20r=%2718%27%20fill=%27%23f1c27d%27%20opacity=%270.7%27/%3E%3C/svg%3E');
            background-repeat: no-repeat;
            background-position: center 12%, center;
            background-size: min(78vw, 720px), min(54vw, 520px);
            mix-blend-mode: screen;
            opacity: 0.45;
        }

        .background-sigil::after {
            content: '';
            position: absolute;
            inset: 0;
            background-image:
                repeating-linear-gradient(135deg, rgba(241, 194, 125, 0.028) 0, rgba(241, 194, 125, 0.028) 28px, transparent 28px, transparent 56px),
                repeating-linear-gradient(45deg, rgba(109, 157, 197, 0.035) 0, rgba(109, 157, 197, 0.035) 22px, transparent 22px, transparent 44px);
            opacity: 0.45;
            mix-blend-mode: soft-light;
        }

        @keyframes aurora {
            0% {
                transform: translate(-2%, -2%) scale(1.05);
            }
            100% {
                transform: translate(2%, 2%) scale(1);
            }
        }

        .container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            background: linear-gradient(160deg, rgba(13, 18, 32, 0.85), rgba(15, 21, 36, 0.75));
            border-radius: 20px;
            box-shadow: 0 20px 60px var(--shadow-strong), inset 0 0 0 1px rgba(255, 255, 255, 0.04);
            backdrop-filter: blur(16px);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.04);
        }

        .container::before,
        .container::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: 20px;
            pointer-events: none;
        }

        .container::before {
            border: 1px solid rgba(214, 143, 62, 0.25);
            opacity: 0.35;
        }

        .container::after {
            filter: blur(22px);
            background: radial-gradient(circle at 50% -10%, rgba(214, 143, 62, 0.25), transparent 50%), radial-gradient(circle at 90% 15%, rgba(109, 157, 197, 0.22), transparent 45%);
            opacity: 0.35;
        }

        .container-veil {
            position: absolute;
            inset: 1px;
            background: repeating-linear-gradient(120deg, transparent 0, transparent 18px, rgba(255, 255, 255, 0.025) 18px, rgba(255, 255, 255, 0.025) 19px);
            border-radius: 20px;
            mix-blend-mode: screen;
            opacity: 0.3;
            pointer-events: none;
            z-index: 0;
        }

        .header {
            position: relative;
            background: linear-gradient(145deg, rgba(9, 14, 26, 0.95), rgba(19, 24, 39, 0.75));
            padding: 40px 30px 35px;
            text-align: center;
            border-bottom: 1px solid rgba(214, 143, 62, 0.25);
            overflow: hidden;
            z-index: 1;
        }

        .header::before,
        .header::after {
            content: '';
            position: absolute;
            pointer-events: none;
        }

        .header::before {
            inset: 0;
            background: radial-gradient(circle at 50% 0%, rgba(214, 143, 62, 0.18), transparent 60%);
            opacity: 0.7;
        }

        .header::after {
            width: 140px;
            height: 140px;
            border: 1px solid rgba(214, 143, 62, 0.35);
            border-radius: 50%;
            top: -40px;
            right: calc(50% - 70px);
            box-shadow: 0 0 40px rgba(214, 143, 62, 0.25);
            animation: pulse 8s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
                opacity: 0.4;
            }
            50% {
                transform: scale(1.1);
                opacity: 0.75;
            }
        }

        .header h1 {
            position: relative;
            color: var(--accent-strong);
            font-family: 'Cinzel', 'Songti SC', serif;
            font-size: 2.8em;
            letter-spacing: 0.12em;
            margin-bottom: 12px;
            text-transform: uppercase;
            text-shadow: 0 0 25px rgba(214, 143, 62, 0.35), 0 6px 12px rgba(0, 0, 0, 0.45);
        }

        .header h1::after {
            content: '';
            display: block;
            width: 180px;
            height: 1px;
            margin: 16px auto 0;
            background: linear-gradient(90deg, transparent, rgba(214, 143, 62, 0.85), transparent);
            box-shadow: 0 0 18px rgba(214, 143, 62, 0.45);
        }

        .header p {
            position: relative;
            color: var(--text-muted);
            font-size: 1.15em;
            letter-spacing: 0.08em;
        }

        .header-glyph {
            position: relative;
            margin-top: 20px;
            color: rgba(214, 143, 62, 0.65);
            letter-spacing: 0.6em;
            font-size: 0.85em;
            text-transform: uppercase;
            font-family: 'Cinzel', serif;
        }

        .main-content {
            position: relative;
            padding: 35px;
            z-index: 1;
        }

        .main-content::before {
            content: '';
            position: absolute;
            inset: 20px;
            border-radius: 16px;
            border: 1px solid rgba(109, 157, 197, 0.2);
            opacity: 0.4;
            pointer-events: none;
        }

        .archetype-selection {
            text-align: center;
            margin-bottom: 35px;
        }

        .archetype-selection h2 {
            font-family: 'Cinzel', serif;
            color: var(--accent-strong);
            margin-bottom: 20px;
            font-size: 1.9em;
            letter-spacing: 0.16em;
        }

        .archetype-selection h2::after {
            content: '';
            display: block;
            width: 120px;
            height: 1px;
            margin: 14px auto 0;
            background: linear-gradient(90deg, transparent, rgba(109, 157, 197, 0.8), transparent);
            box-shadow: 0 0 12px rgba(109, 157, 197, 0.35);
        }

        .archetype-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 18px;
            margin-bottom: 20px;
        }

        .archetype-card {
            position: relative;
            background: linear-gradient(150deg, rgba(19, 26, 43, 0.78), rgba(22, 32, 53, 0.92));
            border: 1px solid var(--card-border);
            border-radius: 12px;
            padding: 22px 20px;
            cursor: pointer;
            transition: all 0.35s ease;
            text-align: center;
            overflow: hidden;
        }

        .archetype-card::before {
            content: '';
            position: absolute;
            inset: -40%;
            background: radial-gradient(circle, rgba(214, 143, 62, 0.18) 0, transparent 65%);
            transform: scale(0);
            transition: transform 0.35s ease;
            opacity: 0;
        }

        .archetype-card::after {
            content: '';
            position: absolute;
            inset: 12px;
            border-radius: 9px;
            border: 1px solid rgba(109, 157, 197, 0.35);
            opacity: 0;
            transition: opacity 0.35s ease;
        }

        .archetype-card:hover::before {
            transform: scale(1);
            opacity: 0.9;
        }

        .archetype-card:hover::after,
        .archetype-card.selected::after {
            opacity: 0.9;
        }

        .archetype-card:hover {
            border-color: rgba(214, 143, 62, 0.55);
            box-shadow: 0 12px 35px rgba(214, 143, 62, 0.18);
            transform: translateY(-4px);
        }

        .archetype-card.selected {
            border-color: rgba(214, 143, 62, 0.9);
            background: linear-gradient(150deg, rgba(35, 27, 44, 0.9), rgba(56, 32, 46, 0.9));
            color: #f8f1e2;
            box-shadow: 0 18px 45px rgba(214, 143, 62, 0.25);
        }

        .archetype-card.selected::before {
            transform: scale(1.1);
            opacity: 1;
        }

        .archetype-card h3 {
            font-family: 'Cinzel', serif;
            margin-bottom: 12px;
            font-size: 1.4em;
            letter-spacing: 0.1em;
        }

        .archetype-card .attributes {
            font-size: 0.95em;
            opacity: 0.85;
            letter-spacing: 0.05em;
        }

        .character-editor {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        .character-editor.active {
            display: grid;
        }

        .section {
            position: relative;
            background: var(--bg-mid);
            border-radius: 14px;
            padding: 28px 25px;
            border: 1px solid rgba(129, 148, 197, 0.25);
            box-shadow: inset 0 0 20px rgba(10, 14, 25, 0.6);
            overflow: hidden;
        }

        .section::before {
            content: '';
            position: absolute;
            inset: 1px;
            border-radius: 12px;
            border: 1px solid rgba(214, 143, 62, 0.18);
            opacity: 0.4;
            pointer-events: none;
        }

        .section::after {
            content: '';
            position: absolute;
            inset: 14px;
            border-radius: 10px;
            border: 1px dashed rgba(109, 157, 197, 0.25);
            opacity: 0.35;
            pointer-events: none;
        }

        .section h3 {
            font-family: 'Cinzel', serif;
            color: var(--accent-strong);
            margin-bottom: 22px;
            font-size: 1.5em;
            letter-spacing: 0.12em;
            border-bottom: 1px solid rgba(214, 143, 62, 0.25);
            padding-bottom: 12px;
        }

        .section h3::after {
            content: '';
            display: block;
            margin-top: 10px;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(214, 143, 62, 0.6), transparent);
        }

        .section h4 {
            font-family: 'Cinzel', serif;
            color: var(--highlight);
            margin-bottom: 16px;
            font-size: 1.1em;
            letter-spacing: 0.08em;
        }

        .form-group {
            margin-bottom: 18px;
        }

        .form-group label {
            display: block;
            margin-bottom: 6px;
            color: var(--text-muted);
            font-weight: 600;
            letter-spacing: 0.05em;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(129, 148, 197, 0.35);
            border-radius: 8px;
            background: linear-gradient(120deg, rgba(8, 12, 24, 0.9), rgba(18, 26, 41, 0.7));
            color: var(--text-primary);
            font-size: 0.95em;
            letter-spacing: 0.03em;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
            box-shadow: inset 0 0 15px rgba(0, 0, 0, 0.35);
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: rgba(214, 143, 62, 0.75);
            box-shadow: 0 0 25px rgba(214, 143, 62, 0.35), inset 0 0 10px rgba(214, 143, 62, 0.2);
        }

        .skill-points-counter {
            position: relative;
            background: linear-gradient(135deg, rgba(35, 27, 44, 0.85), rgba(56, 45, 66, 0.9));
            color: #f8f1e2;
            padding: 18px 20px;
            border-radius: 12px;
            text-align: center;
            margin-bottom: 24px;
            font-size: 1.2em;
            font-weight: bold;
            letter-spacing: 0.2em;
            border: 1px solid rgba(214, 143, 62, 0.35);
            box-shadow: 0 12px 35px rgba(35, 27, 44, 0.45);
        }

        .skill-points-counter::after {
            content: 'âœ§';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            right: 18px;
            color: rgba(241, 194, 125, 0.6);
        }

        .skills-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .skill-category {
            background: linear-gradient(160deg, rgba(17, 23, 39, 0.85), rgba(22, 30, 50, 0.9));
            border-radius: 10px;
            padding: 18px;
            border: 1px solid rgba(109, 157, 197, 0.4);
            box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
        }

        .skill-category h4 {
            color: var(--accent-strong);
            margin-bottom: 12px;
            font-size: 1.1em;
            text-align: center;
            letter-spacing: 0.08em;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 6px 6px 6px 10px;
            border-radius: 6px;
            transition: background 0.2s ease;
        }

        .skill-item:hover {
            background: rgba(214, 143, 62, 0.08);
        }

        .skill-item.specialty {
            background: rgba(214, 143, 62, 0.18);
            border: 1px solid rgba(214, 143, 62, 0.35);
            box-shadow: 0 0 12px rgba(214, 143, 62, 0.25);
        }

        .skill-item label {
            flex: 1;
            margin-right: 12px;
            font-size: 0.95em;
            letter-spacing: 0.04em;
        }

        .skill-item.specialty label::after {
            content: ' â˜…';
            color: var(--accent-strong);
        }

        .skill-item input {
            width: 64px;
            padding: 4px 6px;
            border: 1px solid rgba(129, 148, 197, 0.6);
            border-radius: 5px;
            background: rgba(8, 12, 24, 0.7);
            color: var(--text-primary);
            text-align: center;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .skill-item input:focus {
            border-color: rgba(214, 143, 62, 0.75);
            box-shadow: 0 0 12px rgba(214, 143, 62, 0.3);
            outline: none;
        }

        .background-section {
            max-height: 60vh;
            overflow-y: auto;
            padding-right: 6px;
        }

        .background-question {
            margin-bottom: 22px;
            padding: 18px;
            background: linear-gradient(145deg, rgba(16, 22, 36, 0.85), rgba(29, 36, 54, 0.75));
            border-radius: 12px;
            border: 1px solid rgba(109, 157, 197, 0.35);
            box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.45);
        }

        .background-question h4 {
            color: var(--highlight);
            margin-bottom: 12px;
            font-size: 1.05em;
            letter-spacing: 0.05em;
        }

        .background-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .background-option {
            position: relative;
            display: flex;
            align-items: center;
            padding: 10px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.25s ease, transform 0.25s ease;
        }

        .background-option:hover {
            background: rgba(214, 143, 62, 0.12);
            transform: translateX(6px);
        }

        .background-option input[type='radio'] {
            margin-right: 12px;
            accent-color: var(--accent);
        }

        .background-option label {
            cursor: pointer;
            font-size: 0.95em;
            line-height: 1.4;
            letter-spacing: 0.03em;
        }

        .export-section {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 20px;
        }

        .btn {
            position: relative;
            background: linear-gradient(130deg, rgba(214, 143, 62, 0.95), rgba(109, 157, 197, 0.9));
            color: #120d1f;
            border: none;
            padding: 16px 36px;
            border-radius: 999px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.25s ease, box-shadow 0.25s ease;
            box-shadow: 0 14px 40px rgba(214, 143, 62, 0.35), inset 0 0 15px rgba(255, 255, 255, 0.35);
            letter-spacing: 0.12em;
            text-transform: uppercase;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            inset: 0;
            border-radius: inherit;
            border: 1px solid rgba(255, 255, 255, 0.45);
            opacity: 0;
            transition: opacity 0.25s ease;
        }

        .btn:hover {
            transform: translateY(-3px) scale(1.01);
            box-shadow: 0 18px 45px rgba(109, 157, 197, 0.35);
        }

        .btn:hover::after {
            opacity: 1;
        }

        .btn:disabled {
            background: linear-gradient(135deg, rgba(80, 80, 96, 0.8), rgba(50, 50, 64, 0.8));
            color: rgba(255, 255, 255, 0.5);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .error {
            color: #e96e6e;
            font-size: 0.85em;
            margin-top: 6px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        /* ç‰©å“æ æ ·å¼ */
        .inventory-section {
            background: linear-gradient(160deg, rgba(17, 23, 39, 0.85), rgba(22, 30, 50, 0.9));
            border-radius: 12px;
            padding: 20px;
            border: 1px solid rgba(109, 157, 197, 0.35);
            box-shadow: inset 0 0 18px rgba(0, 0, 0, 0.45);
        }

        .inventory-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(214, 143, 62, 0.25);
        }

        .inventory-header h4 {
            color: var(--accent-strong);
            font-family: 'Cinzel', serif;
            font-size: 1.3em;
            letter-spacing: 0.08em;
            margin: 0;
        }

        .btn-add-item {
            background: linear-gradient(130deg, rgba(214, 143, 62, 0.9), rgba(109, 157, 197, 0.8));
            color: #120d1f;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            display: flex;
            align-items: center;
            gap: 8px;
            letter-spacing: 0.05em;
            box-shadow: 0 6px 20px rgba(214, 143, 62, 0.25);
        }

        .btn-add-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(214, 143, 62, 0.35);
        }

        .add-icon {
            font-size: 1.2em;
            font-weight: bold;
        }

        .inventory-list {
            display: grid;
            gap: 12px;
            margin-bottom: 20px;
        }

        .inventory-header-row {
            display: grid;
            grid-template-columns: 1fr auto auto auto;
            gap: 12px;
            align-items: center;
            background: linear-gradient(135deg, rgba(214, 143, 62, 0.15), rgba(109, 157, 197, 0.15));
            border: 1px solid rgba(214, 143, 62, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            font-weight: 600;
            color: var(--accent-strong);
            font-family: 'Cinzel', serif;
            letter-spacing: 0.05em;
        }

        .header-name {
            text-align: left;
        }

        .header-quantity {
            width: 80px;
            text-align: center;
        }

        .header-weight {
            width: 80px;
            text-align: center;
        }

        .header-action {
            width: 80px;
            text-align: center;
        }

        .inventory-item {
            display: grid;
            grid-template-columns: 1fr auto auto auto;
            gap: 12px;
            align-items: center;
            background: linear-gradient(135deg, rgba(25, 32, 50, 0.8), rgba(35, 42, 60, 0.9));
            border: 1px solid rgba(129, 148, 197, 0.3);
            border-radius: 8px;
            padding: 12px 16px;
            transition: all 0.25s ease;
        }

        .inventory-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 15px;
            padding: 12px 16px;
            background: linear-gradient(135deg, rgba(214, 143, 62, 0.12), rgba(109, 157, 197, 0.12));
            border-radius: 8px;
            border: 1px solid rgba(214, 143, 62, 0.25);
            color: var(--text-primary);
        }

        .summary-text,
        .summary-count {
            font-size: 0.95em;
            letter-spacing: 0.03em;
        }

        .inventory-item:hover {
            border-color: rgba(214, 143, 62, 0.5);
            box-shadow: 0 4px 15px rgba(214, 143, 62, 0.15);
        }

        .inventory-item-name {
            flex: 1;
        }

        .inventory-item-name input {
            width: 100%;
            background: rgba(8, 12, 24, 0.7);
            border: 1px solid rgba(129, 148, 197, 0.4);
            border-radius: 6px;
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 0.95em;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
        }

        .inventory-item-name input:focus {
            outline: none;
            border-color: rgba(214, 143, 62, 0.75);
            box-shadow: 0 0 12px rgba(214, 143, 62, 0.25);
        }

        .inventory-item-quantity {
            width: 80px;
        }

        .inventory-item-quantity input {
            width: 100%;
            background: rgba(8, 12, 24, 0.7);
            border: 1px solid rgba(129, 148, 197, 0.4);
            border-radius: 6px;
            padding: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            text-align: center;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
        }

        .inventory-item-quantity input:focus {
            outline: none;
            border-color: rgba(214, 143, 62, 0.75);
            box-shadow: 0 0 12px rgba(214, 143, 62, 0.25);
        }

        .inventory-item-weight {
            width: 80px;
        }

        .inventory-item-weight input {
            width: 100%;
            background: rgba(8, 12, 24, 0.7);
            border: 1px solid rgba(129, 148, 197, 0.4);
            border-radius: 6px;
            padding: 8px;
            color: var(--text-primary);
            font-size: 0.95em;
            text-align: center;
            transition: border-color 0.25s ease, box-shadow 0.25s ease;
        }

        .inventory-item-weight input:focus {
            outline: none;
            border-color: rgba(214, 143, 62, 0.75);
            box-shadow: 0 0 12px rgba(214, 143, 62, 0.25);
        }

        .btn-remove-item {
            background: linear-gradient(130deg, rgba(220, 53, 69, 0.9), rgba(183, 28, 28, 0.8));
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.25s ease;
            box-shadow: 0 4px 15px rgba(220, 53, 69, 0.25);
        }

        .btn-remove-item:hover {
            transform: translateY(-1px);
            box-shadow: 0 6px 20px rgba(220, 53, 69, 0.35);
        }

        .inventory-tips {
            margin-top: 15px;
            padding: 12px 16px;
            background: rgba(109, 157, 197, 0.1);
            border-radius: 8px;
            border-left: 3px solid rgba(109, 157, 197, 0.6);
        }

        .inventory-instructions {
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(214, 143, 62, 0.08);
            border-radius: 10px;
            border: 1px solid rgba(214, 143, 62, 0.2);
        }

        .instruction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
            padding: 8px 0;
            border-bottom: 1px solid rgba(214, 143, 62, 0.15);
        }

        .instruction-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }

        .instruction-label {
            font-weight: 600;
            color: var(--accent-strong);
            min-width: 80px;
            font-size: 0.95em;
        }

        .instruction-desc {
            color: var(--text-muted);
            font-size: 0.9em;
            flex: 1;
            text-align: right;
            line-height: 1.4;
        }

        .tip-text {
            color: var(--text-muted);
            font-size: 0.9em;
            margin: 0;
            letter-spacing: 0.03em;
        }

        .inventory-empty {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-muted);
            font-style: italic;
            background: rgba(25, 32, 50, 0.5);
            border-radius: 8px;
            border: 2px dashed rgba(129, 148, 197, 0.3);
        }

        @media (max-width: 1024px) {
            .character-editor {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 768px) {
            body {
                padding: 12px;
            }

            .main-content {
                padding: 24px;
            }

            .main-content::before {
                inset: 12px;
            }

            .archetype-grid {
                grid-template-columns: 1fr;
            }

            .skills-grid {
                grid-template-columns: 1fr;
            }
        }

        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(12, 18, 32, 0.6);
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, rgba(214, 143, 62, 0.8), rgba(109, 157, 197, 0.8));
            border-radius: 6px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, rgba(214, 143, 62, 1), rgba(109, 157, 197, 1));
        }
    </style>
</head>
<body>
    <div class="background-sigil" aria-hidden="true"></div>
    <div class="container">
        <div class="container-veil" aria-hidden="true"></div>
        <div class="header">
            <h1>CoC è·‘å›¢è§’è‰²å¡ç”Ÿæˆå™¨</h1>
            <p>åˆ›å»ºæ‚¨çš„å…‹è‹é²ç¥è¯è§’è‰²</p>
            <div class="header-glyph" aria-hidden="true">âœ¶ Ï âœ§ ÏŸ âœ¶</div>
        </div>

        <div class="main-content">
            <!-- åŸå‹é€‰æ‹©åŒºåŸŸ -->
            <div class="archetype-selection" id="archetypeSelection">
                <h2>é€‰æ‹©è§’è‰²åŸå‹</h2>
                <div class="archetype-grid" id="archetypeGrid">
                    <!-- åŸå‹å¡ç‰‡å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <!-- è§’è‰²ç¼–è¾‘å™¨ -->
            <div class="character-editor" id="characterEditor">
                <!-- åŸºæœ¬ä¿¡æ¯ -->
                <div class="section">
                    <h3>åŸºæœ¬ä¿¡æ¯</h3>
                    <div class="form-group">
                        <label for="firstName">å§“å</label>
                        <input type="text" id="firstName" placeholder="è¾“å…¥åå­—">
                    </div>
                    <div class="form-group">
                        <label for="lastName">å§“æ°</label>
                        <input type="text" id="lastName" placeholder="è¾“å…¥å§“æ°">
                    </div>
                    <div class="form-group">
                        <label for="appearance">å¤–è²Œæè¿°</label>
                        <textarea id="appearance" rows="4" placeholder="æè¿°è§’è‰²çš„å¤–è²Œç‰¹å¾"></textarea>
                    </div>
                </div>

                <!-- å±æ€§åŒºåŸŸ -->
                <div class="section">
                    <h3>è§’è‰²å±æ€§</h3>
                    <div class="form-group">
                        <label>ä½“é­„</label>
                        <input type="number" id="physique" readonly>
                    </div>
                    <div class="form-group">
                        <label>æ•æ·</label>
                        <input type="number" id="agility" readonly>
                    </div>
                    <div class="form-group">
                        <label>æ™ºåŠ›</label>
                        <input type="number" id="intellect" readonly>
                    </div>
                    <div class="form-group">
                        <label>å†³å¿ƒ</label>
                        <input type="number" id="resolve" readonly>
                    </div>
                    <h4 style="color: var(--highlight); margin: 20px 0 10px 0;">ç¥ç§˜å­¦å±æ€§</h4>
                    <div class="form-group">
                        <label>ç—´è¿·</label>
                        <input type="number" id="obsession" value="0" readonly>
                    </div>
                    <div class="form-group">
                        <label>ææƒ§</label>
                        <input type="number" id="fear" value="0" readonly>
                    </div>
                </div>

                <!-- æŠ€èƒ½åŒºåŸŸ -->
                <div class="section full-width">
                    <h3>æŠ€èƒ½åˆ†é…</h3>
                    <div class="skill-points-counter">
                        å‰©ä½™æŠ€èƒ½ç‚¹: <span id="remainingPoints">400</span>
                    </div>
                    <div class="skills-grid" id="skillsGrid">
                        <!-- æŠ€èƒ½åˆ†ç±»å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- ç‰©å“æ åŒºåŸŸ -->
                <div class="section full-width">
                    <h3>ç‰©å“æ </h3>
                    <div class="inventory-section">
                        <div class="inventory-header">
                            <h4>éšèº«æºå¸¦ç‰©å“</h4>
                            <button type="button" class="btn-add-item" onclick="addInventoryItem()">
                                <span class="add-icon">+</span> æ·»åŠ ç‰©å“
                            </button>
                        </div>
                        <div class="inventory-instructions">
                            <div class="instruction-item">
                                <span class="instruction-label">ç‰©å“åç§°</span>
                                <span class="instruction-desc">è¾“å…¥ç‰©å“çš„åç§°ï¼ˆå¦‚ï¼šæ‰‹æªã€åŒ»ç–—åŒ…ã€ç¬”è®°æœ¬ç­‰ï¼‰</span>
                            </div>
                            <div class="instruction-item">
                                <span class="instruction-label">æ•°é‡</span>
                                <span class="instruction-desc">è¯¥ç‰©å“çš„æ•°é‡ï¼ˆå¦‚ï¼šå­å¼¹x30å‘ã€ç»·å¸¦x5å·ï¼‰</span>
                            </div>
                            <div class="instruction-item">
                                <span class="instruction-label">é‡é‡(kg)</span>
                                <span class="instruction-desc">å•ä¸ªç‰©å“çš„é‡é‡ï¼Œç”¨äºè®¡ç®—è´Ÿé‡ï¼ˆå¦‚ï¼š0.5kgã€2.3kgï¼‰</span>
                            </div>
                        </div>
                        <div id="inventoryList" class="inventory-list">
                            <!-- ç‰©å“åˆ—è¡¨å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                        </div>
                        <div class="inventory-tips">
                            <p class="tip-text">ğŸ’¡ æç¤º: å¯ä»¥æ·»åŠ è§’è‰²æºå¸¦çš„æ­¦å™¨ã€å·¥å…·ã€ä¸ªäººç‰©å“ç­‰ã€‚æ€»é‡é‡ä¼šè‡ªåŠ¨è®¡ç®—æ˜¾ç¤ºã€‚</p>
                        </div>
                    </div>
                </div>

                <!-- èƒŒæ™¯æ•…äº‹åŒºåŸŸ -->
                <div class="section full-width">
                    <h3>èƒŒæ™¯æ•…äº‹</h3>
                    <div class="background-section" id="backgroundSection">
                        <!-- èƒŒæ™¯é—®é¢˜å°†ç”±JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>

                <!-- å¯¼å‡ºåŒºåŸŸ -->
                <div class="export-section">
                    <button class="btn" id="exportBtn" onclick="exportCharacter()">ä¿å­˜å¹¶å¯¼å‡ºJSON</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // è§’è‰²åŸå‹æ•°æ®
        const archetypes = {
            "æœ‰å¿—é’å¹´": {
                attributes: { physique: 30, agility: 50, intellect: 80, resolve: 50 },
                presetSkills: { "é˜…å†": 60, "æ³•è¯­": 60 },
                specialties: ["é˜…å†", "æ³•è¯­"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯ä¸€ä½å¤–äº¤å®˜", "æ˜¯è´µæ—", "æ­£å†™ç€ä»–æœ‰å…³æ¯”è¾ƒç¥è¯å­¦çš„å·¨è‘—", "å¯¹ç”Ÿæ´»å……æ»¡å¤±æœ›"],
                    "ä½ çš„æ¯äº²": ["å› ç—…ä¸èƒ½è‡ªç†", "æ˜¯å°æœ‰åæ°”çš„ä¼˜ç§€ç”»å®¶", "ä¸€ç›´æƒ³è®©ä½ å¤šåƒç‚¹", "åæ‚”å¥¹å«äº†ä½ çš„çˆ¶äº²"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["æˆ´ç€çœ¼é•œï¼Œæ€§æ ¼å¤æ€ª", "æ˜¯éŸ³ä¹ç¥ç«¥", "ç»å¸¸åšåå¤æ— å¸¸çš„å™©æ¢¦", "å®¹æ˜“é™·å…¥ä¸€é˜µå¿§éƒ"],
                    "ä½ å°±å­¦äº": ["ç‰›æ´¥", "å‰‘æ¡¥", "ç´¢é‚¦(å·´é»å¤§å­¦)", "ç»´æ»•è´æ ¼"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["ç€è¥¿Â·ç¦æ–¯ç‰¹Â·è·¯æ˜“æ–¯,ä½ çš„åŒå­¦", "è–‡è–‡å®‰Â·è¥¿å°”ç¦é¡¿,åœ¨æœ¬åœ°ä¹¦åº—é‡è§", "ç“¦ä¼¦ä¸,ä½ å…»çš„èŠ±çŒ«", "å’–å•¡"],
                    "ä½ æœ€æ€•": ["å‘ç–¯", "åœ¨çœ‹å®Œæƒ³çœ‹çš„ä¹¦ä¹‹å‰æ­»å»", "è¢«æ´»åŸ‹", "è›‡"],
                    "ä½ ç°åœ¨": ["åˆç©·åˆé¥¿", "æ˜¯ä¸ªè–ªæ°´ä½çš„æ–‡èŒ", "éƒ¨åˆ†ç¿»è¯‘äº†ä¸€æœ¬é²œä¸ºäººçŸ¥ä¸”æœ‰å¯èƒ½éæ³•çš„æ„å¤§åˆ©æ–‡æ‰‹ç¨¿"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["æ·±å¤œé‡Œè¾©è®ºäººç±»çµé­‚çš„æœ¬è´¨", "å›½é™…è±¡æ£‹å’Œä¾¿å®œè‘¡è„é…’", "é˜…è¯»æ·±å¥¥åˆé¾Œé¾Šçš„æ³•å›½å“²å­¦"],
                    "ä½ æœ€å–œæ¬¢çš„ä¹¦æ˜¯": ["ã€Šæ¶ä¹‹åã€‹", "ã€Šå¤œæ¸¸æ¼«è®°ã€‹", "ã€Šæµ®å£«å¾·åšå£«ã€‹", "ã€Šé“æ—æ ¼é›·çš„ç”»åƒã€‹", "ä½ å®¤å‹çš„\"ç§˜å¯†\"æ—¥è®°"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"ä¸å…¶å’’éª‚é»‘æš—,ä¸å¦‚ç‚¹äº®èœ¡çƒ›ã€‚\"", "\"ç¬”æ¯”å‰‘æ›´å¼ºå¤§ã€‚\"", "\"æˆ‘ä»¬éƒ½åœ¨é˜´æ²Ÿé‡Œ,ä½†æœ‰äº›äººåœ¨ä»°æœ›æ˜Ÿç©ºã€‚\""]
                }
            },
            "å¯Œå®¶å­å¼Ÿ": {
                attributes: { physique: 60, agility: 60, intellect: 40, resolve: 50 },
                presetSkills: { "èŠ±è¨€å·§è¯­": 60, "è°ˆåˆ¤": 60, "å°„å‡»": 60 },
                specialties: ["èŠ±è¨€å·§è¯­", "è°ˆåˆ¤", "å°„å‡»"],
                background: {
                    "ä½ çš„çº¹ç« æ˜¯": ["\"Lilium Interspinas\"(è†æ£˜ä¸›ä¸­çš„å…°èŠ±)", "\"Noli Irritate Leonem\"(åˆ«å”¤é†’é›„ç‹®)", "\"Je m'en souvien-dray\"(å¾å°†é“­è®°)"],
                    "ä½ çš„çˆ¶äº²": ["æ˜¯éª‘å£«", "æ˜¯å‡†ç”·çˆµ", "æ˜¯å‹‹çˆµ", "æ˜¯ä¼¯çˆµ", "å¸¸å¸¸é†‰é…’"],
                    "ä½ çš„æ¯äº²": ["æ˜¯è´µæ—å°å§", "æ˜¯å¥³çˆµå£«", "ç»“äº†å››æ¬¡å©š", "è‡­åæ˜­è‘—"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["è¢«é€å»å¯„å®¿å­¦æ ¡", "ç”±äº’æƒ ç”Ÿæ ¼é²æ–¯æˆ´å°”å°å§ç…§é¡¾", "æ—¶é«¦åœ°è¢«ç–äºç…§é¡¾"],
                    "ä½ å°±è¯»äº": ["ç‰›æ´¥", "å‰‘æ¡¥"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["æ¥è‡ªç¬¬æ¬§æ ¹å°¼ä¿±ä¹éƒ¨çš„ä¼Šæ ¼å†…ä¿®æ–¯Â·æ²ƒç‰¹é‡‘æ–¯", "è¥¿å°”ä¸‡å¸Œå°”è¾¾Â·ç±³å°”ç¦é¡¿,å°å­¦åŒå­¦", "è›‹è›‹,å®¶é‡Œçš„å…«å“¥çŠ¬", "ä¸€ç“¶1811å¹´çš„éª‘å£«è’™å“ˆæ¦­"],
                    "ä½ æœ€æ€•": ["æ­Œå‰§é™¢", "ä½ çš„å€ºä¸»å‘ç°ä½ åœ¨ä¼¦æ•¦çš„ä½å€", "è¢«å†™å‡ºé—å˜±"],
                    "ä½ ç°åœ¨": ["é™·å…¥çˆ±æ²³", "å¤±æ‹äº†", "ç»“äº†å©š", "ç¦»äº†å©š", "ä¸§å¶", "å¿ƒé‡Œå¼¥æ¼«ç€å¯¹çˆ±çš„å€¦æ€ æ„Ÿ", "ç‰¹åˆ«æƒ³åƒè‹±å¼éº¦èŠ¬"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["åœ¨åˆ‡å¨å°”æ²³ä¸Šæ’‘èˆ¹", "åœ¨ä¿±ä¹éƒ¨é‡Œå¯»æ¬¢ä½œä¹", "åœ¨å®¿é†‰ä¹‹å‰å‘ç”Ÿçš„æ‰€æœ‰äº‹"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"ç¤¼èŠ‚é€ å°±äººå“ã€‚\"", "\"å®¶åº­ç¬¬ä¸€ã€‚\"", "\"ä¸‡äº‹çš†é€‚åº¦,åŒ…æ‹¬é€‚åº¦æœ¬èº«ã€‚\""]
                }
            },
            "èˆè€…": {
                attributes: { physique: 70, agility: 80, intellect: 30, resolve: 30 },
                presetSkills: { "èå…¥": 60, "æ¼”æŠ€": 60 },
                specialties: ["èå…¥", "æ¼”æŠ€"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯é©¬æˆå›¢é•¿", "æ˜¯ç”»å®¶", "æ˜¯é©å‘½åˆ†å­", "ç ´äº§äº†"],
                    "ä½ çš„æ¯äº²": ["æ˜¯é©¬æˆå›¢çš„æ‚æŠ€æ¼”å‘˜", "æ˜¯æ¼”å‘˜", "é¸¦ç‰‡ä¸Šç˜¾äº†", "åœ¨æ•™å ‚çš„å°å†Œå­é‡Œè¢«ç”¨ä½œè­¦ç¤ºæ€§ä¾‹å­"],
                    "ä½ åœ¨ç«¥å¹´æ—¶ä»£": ["æ˜¯åä¸€ä¸ªå…„å¼Ÿå§å¦¹ä¹‹ä¸€", "æ‚£äº†ç—¨ç—…", "å¯¹ç”Ÿæ—¥ç¤¼ç‰©çš„è¦æ±‚éå¸¸ç²¾ç»†", "æ˜¯ä¸ªç¬¨æ‹™çš„å°èƒ–ä»”"],
                    "è¯„è®ºå®¶è¯´ä½ ": ["ç¾ä¸½", "ä¸é“å¾·", "å‰å«", "æ€¥è¿«åœ°éœ€è¦ä¼‘å‡", "è¢«æµªè´¹åœ¨æˆ‘çš„è§‚ä¼—ä¸Š"],
                    "è¡¨æ¼”ä¹‹å,ä½ ": ["é˜…è¯»ä»Šæ™šçš„è´ºå¡å’Œæƒ…ä¹¦", "ç”¨ä¸€ä¸¤æ”¯é»‘çŒ«é¦™çƒŸæ”¾æ¾ä¸€ä¸‹", "å’Œå‰§å›¢çš„å…¶ä»–æˆå‘˜ä¸€èµ·å–ä¸ªçƒ‚é†‰"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["åŸƒå¼—æ‹‰ä¼Šå§†Â·æ¯”æ ¼æ–¯,ä¼¦æ•¦æœ€å°çš„å¤§åŠ›å£«", "éº¦èŒœÂ·éœæ™®è±ç‰¹,å”±è¯—ç­å¥³å­©", "å°æ€’,ä½ å…»çš„çŒ©çº¢è‰²é‡‘åˆšé¹¦é¹‰"],
                    "ä½ æœ€æ€•": ["å˜è€", "å·®è¯„", "é£Ÿç‰©ä¸­æ¯’", "è¢«ç†Šå’¬æ­»"],
                    "ä½ ç°åœ¨": ["æ­£å¯»æ‰¾èµåŠ©äºº", "ä¸æ•¢ç›¸ä¿¡è‡ªå·±ç©¿ä¸ä¸‹ä»¥å‰çš„æˆæœäº†", "é©æ–°ç€ä½ çš„å…¬ä¼—å½¢è±¡"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["å”±ç‰‡æœºä¸Šæ”¾ç€çˆµå£«ä¹,æ‰‹é‡Œä¸€æ¯å¨å£«å¿Œé…¸", "å»åŠ¨ç‰©å›­", "åœ¨æ—¶é«¦æ´¾å¯¹ä¸Šé—ªäº®ç™»åœº,ç†æƒ³æƒ…å†µä¸‹é—¹å‡ºå¤§åœºé¢æ¥"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"ç”Ÿå‘½è™½çŸ­,è‰ºæœ¯æ°¸å­˜ã€‚\"", "\"æ²¡æœ‰å¤ªè®²ç©¶çš„è¡£ç€,ä¹Ÿæ²¡æœ‰å¤ªæ·±å…¥çš„æ•™è‚²ã€‚\"", "\"å¥½æœ‹å‹æ°¸è¿œä¼šåœ¨æ­£é¢æ…ä½ ã€‚\""]
                }
            },
            "è­¦æ¢": {
                attributes: { physique: 60, agility: 50, intellect: 70, resolve: 30 },
                presetSkills: { "æ–—æ®´": 60, "å°„å‡»": 60, "è¿½è¸ª": 60 },
                specialties: ["æ–—æ®´", "å°„å‡»", "è¿½è¸ª"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯è”¬æœè´©", "æ˜¯æœºä¿®å·¥", "å–œæ¬¢å†™ä¿¡ç»™æœ¬åœ°æŠ¥ç¤¾", "ä¸å¯åŠ¨æ‘‡"],
                    "ä½ çš„æ¯äº²": ["æ˜¯è´µæ—å¤«äººçš„ä¾å¥³", "å› ç—…ä¸èƒ½è‡ªç†", "å®Œå…¨æ˜¯ä¸ªè´Ÿæ‹…", "ä¸å¯é˜»æ‹¦"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["å¤©å¤©æ‰“æ¶", "æ˜¯é‚£ç§ä¼šåœ¨å£è¢‹é‡Œæ£ç€é’è›™å›å®¶çš„å°å­©", "æœ‰ä¸€æ¬¡åœ¨åŠ¨ç‰©å›­é‡Œè¢«è½ä¸‹äº†"],
                    "ä½ çš„åæ°”æ¥è‡ª": ["è¿ç”¨é€»è¾‘æ¨ç†çš„ä¾¦æ¢å·¥ä½œ", "è¿…æ·æ•é”çš„æ€ç»´", "åšéŸ§ä¸æ‹”çš„ç²¾ç¥", "åŸåˆ™ä¸Šå¯¹äººæœ¬æ€§çš„ä¸ä¿¡ä»»"],
                    "ç½ªçŠ¯åº”è¯¥": ["è¢«æ¸…é™¤", "æœ‰é‡æ–°åšäººçš„æœºä¼š", "åº†å¹¸ä»–ä»¬ä¸å†ä¼šè¢«é€å»æ¾³å¤§åˆ©äºš"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["æµ·å¸•æä¹Œæ–¯Â·å…‹éƒå§†è­¦å‘˜,æ¥è‡ªä¼¦æ•¦è­¦å¯Ÿå…", "è‰¾ç¾ç³Â·å—ä¸æ ¼å°”,å¹³å…‹é¡¿é›‡å‘˜", "é˜¿å°”ä¼¯ç‰¹,ä½ å…»å¾—éå¸¸æ£’çš„å¾·å›½ç‰§ç¾ŠçŠ¬"],
                    "ä½ æœ€æ€•": ["çŠ¯ç½ªé›†å›¢", "æ€€æ¨åœ¨å¿ƒçš„å‡ºé€ƒå›šå¾’", "æ–‡ä¹¦", "åŸƒåŠ,ä¸è¿‡æˆ‘è‚¯å®šæ°¸è¿œä¸ä¼šå»é‚£"],
                    "ä½ ç°åœ¨": ["æ­£å¤„ç†ç€ä»€ä¹ˆé—®é¢˜", "æƒ³è¦å®‰å®šä¸‹æ¥", "å¥½æƒ³åƒå¡ä»•è¾¾å¥¶æ²¹"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["ä¼¦æ•¦æ–°é—»ç”»æŠ¥ä¸Šçš„å¡«å­—æ¸¸æˆ", "åŸ¹è‚²è·å¥–çš„è¥¿è‘«èŠ¦", "æ— äººæ‰“æ‰°æ—¶å¸çƒŸæ–—"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"æ€€ç–‘ä¸€åˆ‡ã€‚\"", "\"ä½ çš„æ•ŒäººçŠ¯é”™æ—¶æ°¸è¿œä¸è¦ä¸­æ–­ä»–ä»¬\"", "\"ä¸æ˜¯æˆ‘å¼€çš„é©¬æˆå›¢,ä¹Ÿä¸æ˜¯æˆ‘å…»çš„çŒ´å­ã€‚\""]
                }
            },
            "æµäº¡è€…": {
                attributes: { physique: 50, agility: 60, intellect: 30, resolve: 70 },
                presetSkills: { "çªƒè´¼": 60, "æ–—æ®´": 60, "æŒåˆƒæˆ˜æ–—": 60 },
                specialties: ["çªƒè´¼", "æ–—æ®´", "æŒåˆƒæˆ˜æ–—"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["åº”è¯¥æ­»äº†", "å‡ ä¹è‚¯å®šæ˜¯æ­»äº†", "åœ¨è¹²ç›‘ç‹±", "æ²¡æœ‰åå­—ã€æ¥å†ä¸æ˜"],
                    "ä½ çš„æ¯äº²": ["åº”è¯¥æ­»äº†", "å‡ ä¹è‚¯å®šæ˜¯æ­»äº†", "åœ¨è¹²ç›‘ç‹±", "å¤å©šäº†å¹¶æƒ³é‡‘ç›†æ´—æ‰‹"],
                    "ä½ çš„å¦ä¸€ä¸ª\"å®¶åº­\"": ["æ— å¤„ä¸åœ¨", "æ— äººä¸æƒ§", "å¯¹ä½ çœŸçš„éå¸¸æ¼æ€’"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["æ˜¯ä¸ªæˆåŠŸçš„æ‰’æ‰‹", "æ¯å¤©èƒ½æ´»ç€å°±ç®—å¹¸è¿äº†", "å¯¹çŠ¯ç½ªå­¦å®¶å¯Œæœ‰å¸å¼•åŠ›", "æ˜¯è‡ªç”±çš„"],
                    "çŠ¯ç½ª": ["æœ‰å¥½å¤„", "æ²¡å¥½å¤„"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["ç†å‘å¸ˆç¥–è²äºš", "é¢åŒ…å¸ˆå¤šæ˜å°¼å¡ä¸", "èµ°ç§çŠ¯ä¹”æ²»æ¬§", "ä½ å¯é çš„å°åˆ€"],
                    "ä½ æœ€æ€•": ["æ³•å¾‹é‚£æ— å¤„ä¸åŠçš„é•¿è‡‚", "ä½ çŠ¯ç½ªåŒä¼™ä»¬é‚£æ›´çŸ­,ä½†æ›´è¡€æ·‹æ·‹çš„æ‰‹è‡‚", "é†’æ¥æ—¶å‘ç°è‡ªå·±æ­»äº†"],
                    "ä½ ç°åœ¨": ["åœ¨é€ƒäº¡çš„é€”ä¸­", "æƒ³è¦é‡‘ç›†æ´—æ‰‹", "æ‰§ç€äºå®¿ä»‡", "é†‰äº†", "ä¸å¯è§£é‡Šåœ°æ¥åˆ°äº†äºšå†å±±å¤§æ¸¯"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["èµŒåœºå’Œé¦™æ§Ÿ", "åŒé™†æ£‹å’Œé›ªèŒ„", "é«˜é£é™©çš„éª—å±€", "ä¸è¢«æ€æ­»"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"è‹¥ä½ è§‰å¾—è‡ªå·±èº«å¤„åœ°ç‹±,é‚£å°±ç»§ç»­èµ°ä¸‹å»ã€‚\"", "\"å¥½äº‹æ²¡å¥½æŠ¥ã€‚\"", "\"æœ€å¥½çš„æŠ¥å¤å°±æ˜¯å¥½å¥½æ´»ç€ã€‚\""]
                }
            },
            "çµåª’": {
                attributes: { physique: 30, agility: 70, intellect: 60, resolve: 50 },
                presetSkills: { "èŠ±è¨€å·§è¯­": 60, "æ¼”æŠ€": 60, "æ˜æœ¯": 60 },
                specialties: ["èŠ±è¨€å·§è¯­", "æ¼”æŠ€", "æ˜æœ¯"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯å®—æ•™æ²»æ„ˆå¸ˆ", "æ˜¯éª—å­", "åœ¨è¹²ç›‘ç‹±", "æ­»äº†"],
                    "ä½ çš„æ¯äº²": ["æ˜¯å åœå¸ˆ", "æ˜¯è´µæ—", "ä¸€è´«å¦‚æ´—", "æ­»äº†"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["å¼€å¿ƒ", "å­¤å•", "å—å¹»è§‰ä¾µæ‰°", "ç»å¸¸å‘æ€ªçƒ§", "æ˜¯å­¦æ ¡é‡Œæœ€å—æ¬¢è¿çš„å­©å­,æ¯‹åº¸ç½®ç–‘"],
                    "è¯„è®ºå®¶è¯´ä½ ": ["æ˜¯ä¼¦æ•¦æœ€ä¼Ÿå¤§çš„çµåª’", "æ›´é€‚åˆåœ¨å°å­©çš„ç”Ÿæ—¥æ´¾å¯¹ä¸Šå‡ºåœº", "æŒºå¯ç–‘çš„", "æ¿ä¸Šé’‰é’‰çš„éª—å­"],
                    "è¡¨æ¼”ä¹‹å,ä½ ": ["ä¸çƒ­çˆ±ä½ çš„ç²‰ä¸è§é¢", "å¾„ç›´å»ç¥¨æˆ¿æ‹¿æŠ¥é…¬", "æ„Ÿè°¢ä½ çš„\"çµé­‚å‘å¯¼\", ä»¥é˜²ä¸‡ä¸€"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["èµ«ä¼¯ç‰¹Â·å¸ƒæœ—ç½—,ä½ å¿ å®çš„åŠ©æ‰‹", "å…ˆçŸ¥ç±³ç‘äºš", "ä¸€å¥—ç”±æ»‘è½®ã€èœ¡çƒ›å’Œé•œå­ç»„æˆçš„å¤æ‚ç³»ç»Ÿ", "ä¸€åªé¬¼,å¤§æ¦‚"],
                    "ä½ æœ€æ€•": ["ç©ºç©ºçš„å‰§é™¢", "å”¤èµ·ä½ æ— æ³•é•‡å‹çš„ä¸œè¥¿", "è¢«è¿‡äºä»”ç»†åœ°æ£€æŸ¥"],
                    "ä½ ç°åœ¨": ["æƒ³ç€è¦é€€ä¼‘", "æä¾›ä¸ªäººå’¨è¯¢æœåŠ¡", "è¢«é¬¼é™„èº«äº†"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["é˜…è¯»ä½ è¡¨æ¼”çš„è¯„è®º", "æ”¶é›†ç¥ç§˜çš„å™¨ç‰©", "åœ¨åœ£è©¹å§†æ–¯å…¬å›­é‡Œå–‚é¸­å­"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"ä¸‡ç‰©éƒ½æœ‰è£‚ç¼,å…‰ä¾¿æ˜¯è¿™ä¹ˆè¿›æ¥çš„ã€‚\"", "\"çœŸç›¸å¾ˆå°‘çº¯ç²¹,æ°¸ä¸ç®€å•ã€‚\"", "\"æ‹œè®¿é©´å­çš„å®¶æ—¶,åŠ¡å¿…åˆ«æèµ·è€³æœµã€‚\""]
                }
            },
            "åŒ»å¸ˆ": {
                attributes: { physique: 50, agility: 50, intellect: 70, resolve: 40 },
                presetSkills: { "æ–—æ®´": 60, "åŒ»å­¦": 60, "è¯å‰‚å¸ˆ": 60 },
                specialties: ["æ–—æ®´", "åŒ»å­¦", "è¯å‰‚å¸ˆ"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯ä¸ªæ”¿å®¢", "æ˜¯è‘—åçš„å¤–ç§‘å¤§å¤«", "ä¸å¯æ€è®®åœ°å¥åº·", "ä¸ºä½ éª„å‚²å¾—ä»¤äººå®³ç¾"],
                    "ä½ çš„æ¯äº²": ["æ˜¯ä¸ªäº¤é™…èŠ±", "æ ¹æœ¬ä¸Šè´¨ç–‘ç§‘å­¦", "æ˜¯å®—æ•™æ²»æ„ˆå¸ˆ", "ç—…å…¥è†è‚“", "å…¶å®æ˜¯ä½ä¿—æµªæ¼«æ–‡å­¦ä½œå®¶"],
                    "ä½ åœ¨ç«¥å¹´æ—¶ä»£": ["å®Œç¾æ— ç¼º", "å› åŒ–å­¦å®éªŒè¢«å¤šå®¶å­¦æ ¡é€€å­¦", "å¯¹è§£å‰–ä¸œè¥¿æœ‰å¥‡æ€ªçš„å…´è¶£"],
                    "ä½ çš„ä¸“ç§‘æ˜¯": ["ä¼ æŸ“ç—…å­¦", "éª¨ä¼¤ç§‘", "çƒ­å¸¦ç–¾ç—…", "è‰è¯å­¦"],
                    "ä½ æ‰€å±çš„è¯Šæ‰€": ["è’¸è’¸æ—¥ä¸Š", "å¥„å¥„ä¸€æ¯", "åœ¨å“ˆåˆ©è¡—çš„ä¸€å—éœ€æ±‚æé«˜çš„åœ°çš®ä¸Š", "é™·å…¥å±‚å±‚ä¸‘é—»ä¹‹ä¸­"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["å¤šåˆ©å®‰Â·è‹±æ‰«,åŒ»å­¦é™¢çš„åŒå­¦", "èŠ™æ´›æ‹‰Â·å¤å¾·æ¸©,æœ¬åœ°çš„éªŒå°¸å®˜", "é¸¦ç‰‡é…Š", "ä½ çš„å£è¢‹ç‰ˆã€Šç½—ä¼¯ç‰¹Â·è·¯æ˜“æ–¯Â·å²è’‚æ–‡æ£®å…¨é›†ã€‹"],
                    "ä½ æœ€æ€•": ["éœä¹±ç–«æƒ…çˆ†å‘", "å®‰å®šä¸‹æ¥", "è¿·å¤±åœ¨æµ·ä¸Š", "è¡€"],
                    "ä½ ç°åœ¨": ["å¯»æ‰¾ç€çˆ±æƒ…", "åˆšç¦»å©š", "åŒä¸–", "å› è‡ªå·±çš„ä¸Šä¸€ç¯‡ä¸“è‘—æˆäº†å"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["å’Œä½ çš„åŒäº‹ä¸€èµ·åœ¨é›…å…¸å¨œç¥åº™ä¿±ä¹éƒ¨é‡Œä½œä¹", "åœ¨äº¤æ˜“æ‰€é‡ŒèµŒç‚¹å°é’±", "å…»èœ‚"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"ä¸ä½œæ¶ã€‚\"", "\"ä»Šæ—¥çš„ç—›æ¥šæ˜¯æ˜æ—¥çš„åŠ›é‡ã€‚\"", "\"è¯´çœŸè¯,ä½†è¯´å®Œå°±å¾—èµ°ã€‚\""]
                }
            },
            "æ•™å£«": {
                attributes: { physique: 30, agility: 50, intellect: 70, resolve: 60 },
                presetSkills: { "èå…¥": 60, "æ¼”æŠ€": 60, "å¸Œè…Šè¯­": 60 },
                specialties: ["èå…¥", "æ¼”æŠ€", "å¸Œè…Šè¯­"],
                background: {
                    "ä½ çš„çˆ¶äº²": ["æ˜¯ä¸»æ•™", "æ˜¯æ¶æ£", "æ˜¯è´µæ—", "å¯¹ä½ çš„èŒä¸šé€‰æ‹©è¡¨ç¤ºå¤±æœ›"],
                    "ä½ çš„æ¯äº²": ["æ˜¯å£°æœ›ä¸é”™çš„å¥½å¥³äºº", "å£°åç‹¼è—‰", "æ˜¯æ‰å¥³", "ç›®å‰æ¯«æ— è¸ªè¿¹"],
                    "ç«¥å¹´æ—¶ä»£çš„ä½ ": ["ç‰¹åˆ«å®³ç¾", "æ”¾è¡ä¸ç¾", "æ˜¯ä¸ªä¹¦è™«", "ç»å¸¸å‘ä½œç™«ç—«", "æ˜¯ç¥èŒäººå‘˜çŠ¯ä¸‹çš„ç½ª"],
                    "ä½ çš„æ•™å ‚": ["æ˜¯ä½ çš„å®¶", "æ˜¯ç”¨æ¥æ”¾é’±çš„æ´", "åŸºæœ¬ä¸Šæ˜¯ä¸ªå°æœ¨å±‹", "æ˜¯ç¥é‚£å¤è€åˆå®ä¼Ÿçš„æ®¿å ‚"],
                    "ä½ çš„å¸ƒé“": ["æœ‰ç‚¹é•¿", "æœ‰å…³ä¸»é‚£æ— å£°çš„å–„æ„", "æœ‰å…³åœ°ç‹±æœ‰å¤šç³Ÿç³•", "è¢«æµªè´¹åœ¨ä½ çš„ä¼šä¼—ä¸Š"],
                    "ä½ æœ€äº²å¯†çš„æœ‹å‹æ˜¯": ["æ°æ‹‰å°”å¾·Â·éœæ™®é‡‘æ–¯ç‰§å¸ˆ", "è‰¾è–‡Â·æ¯›ç‘æ€å…‹ä¿®å¥³", "åŸºç”¸,ä½ çš„å® ç‰©å°é¼ "],
                    "ä½ æœ€æ€•": ["åœ°ç‹±,å½“ç„¶äº†", "ç¥å¯èƒ½ä¸å­˜åœ¨", "èœ˜è››", "è¢«ç‹„å…‹æ£®-æ ¼é‡Œè²æ–¯å¤«äººé‚€è¯·å»èŒ¶ä¼š"],
                    "ä½ ç°åœ¨": ["ç²¾å¿ƒåœ°ç­–åˆ’ç€ä¸€åœºæŠ½å¥–æ´»åŠ¨", "å‡†å¤‡è¿›è¡Œé©±é­”", "ç¬¬ä¸€ç™¾æ¬¡å°è¯•ç†è§£æ¡¥ç‰Œçš„è§„åˆ™"],
                    "ä½ æœ€å–œæ¬¢çš„æ¶ˆé£æ˜¯": ["ç”¨å‡è‡é’“é±¼", "ç”¨æ•™å ‚çš„ç®¡é£ç´æ¼”å¥æ‹‰æ ¼æ³°å§†", "é»‘åŠ ä»‘åˆ©å£é…’å’Œä¸€æœ¬æµªæ¼«å°è¯´", "å†™ä¸ç»™ä»»ä½•äººçœ‹çš„è¯—"],
                    "ä½ çš„åº§å³é“­æ˜¯": ["\"æ¯ä¸ªåœ£äººéƒ½æœ‰è¿‡å»,æ¯ä¸ªç½ªäººéƒ½æœ‰æœªæ¥ã€‚\"", "\"æ£‹ä¸‹å®Œäº†,ç‹å’Œå’éƒ½å°†å›åˆ°åŒä¸€ä¸ªç›’å­é‡Œã€‚\"", "\"å¯ä»¥å‘ç¥ç¥ˆç¥·,ä½†è‡ªå·±ä¹Ÿå¾—å‘æµ·å²¸åˆ’èˆ¹ã€‚\""]
                }
            }
        };

        // æŠ€èƒ½åˆ†ç±»
        const skillCategories = {
            "ç¤¾äº¤": ["è¯±æƒ‘", "èŠ±è¨€å·§è¯­", "èå…¥", "è°ˆåˆ¤", "æ¼”æŠ€"],
            "å®ç”¨": ["çˆ†ç ´", "é©¾é©¶", "ä¿®ç†å·¥", "å›­è‰º", "æŒåˆƒæˆ˜æ–—", "é˜¿æ‹‰ä¼¯è¯­", "æ³•è¯­", "å¸Œè…Šè¯­", "æ°´æ‰‹", "åŒ»å­¦", "è¯å‰‚å¸ˆ", "çªƒè´¼", "æ–—æ®´", "å°„å‡»", "è¿½è¸ª", "é˜…å†"],
            "ç¥ç§˜å­¦": ["æ˜æœ¯", "æš—æœ¯"]
        };

        let currentArchetype = null;
        let skillValues = {};
        let backgroundChoices = {};
        let inventoryItems = [];

        // åˆå§‹åŒ–åº”ç”¨
        function initApp() {
            renderArchetypes();
            initializeSkills();
            initializeInventory();
        }

        // æ¸²æŸ“åŸå‹é€‰æ‹©
        function renderArchetypes() {
            const grid = document.getElementById('archetypeGrid');
            grid.innerHTML = '';

            Object.keys(archetypes).forEach(name => {
                const archetype = archetypes[name];
                const card = document.createElement('div');
                card.className = 'archetype-card';
                card.onclick = () => selectArchetype(name);
                
                card.innerHTML = `
                    <h3>${name}</h3>
                    <div class="attributes">
                        ä½“é­„: ${archetype.attributes.physique} | 
                        æ•æ·: ${archetype.attributes.agility} | 
                        æ™ºåŠ›: ${archetype.attributes.intellect} | 
                        å†³å¿ƒ: ${archetype.attributes.resolve}
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // é€‰æ‹©åŸå‹
        function selectArchetype(name) {
            currentArchetype = name;
            const archetype = archetypes[name];

            // æ›´æ–°é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.archetype-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.target.closest('.archetype-card').classList.add('selected');

            // å¡«å……å±æ€§
            document.getElementById('physique').value = archetype.attributes.physique;
            document.getElementById('agility').value = archetype.attributes.agility;
            document.getElementById('intellect').value = archetype.attributes.intellect;
            document.getElementById('resolve').value = archetype.attributes.resolve;

            // é‡ç½®æŠ€èƒ½å€¼
            initializeSkills();
            
            // è®¾ç½®é¢„è®¾æŠ€èƒ½å€¼
            Object.keys(archetype.presetSkills).forEach(skill => {
                skillValues[skill] = archetype.presetSkills[skill];
                const input = document.querySelector(`input[data-skill="${skill}"]`);
                if (input) {
                    input.value = archetype.presetSkills[skill];
                }
            });

            // é‡ç½®ç‰©å“æ 
            initializeInventory();

            // æ¸²æŸ“æŠ€èƒ½åŒºåŸŸ
            renderSkills();
            
            // æ¸²æŸ“èƒŒæ™¯æ•…äº‹
            renderBackground();
            
            // æ›´æ–°å‰©ä½™æŠ€èƒ½ç‚¹
            updateRemainingPoints();

            // æ˜¾ç¤ºç¼–è¾‘å™¨
            document.getElementById('characterEditor').classList.add('active');
        }

        // åˆå§‹åŒ–æŠ€èƒ½å€¼
        function initializeSkills() {
            skillValues = {};
            Object.values(skillCategories).flat().forEach(skill => {
                skillValues[skill] = 0;
            });
        }

        // æ¸²æŸ“æŠ€èƒ½åŒºåŸŸ
        function renderSkills() {
            const skillsGrid = document.getElementById('skillsGrid');
            skillsGrid.innerHTML = '';

            Object.keys(skillCategories).forEach(category => {
                const categoryDiv = document.createElement('div');
                categoryDiv.className = 'skill-category';
                
                const categoryTitle = document.createElement('h4');
                categoryTitle.textContent = category;
                categoryDiv.appendChild(categoryTitle);

                skillCategories[category].forEach(skill => {
                    const skillItem = document.createElement('div');
                    skillItem.className = 'skill-item';
                    
                    // æ£€æŸ¥æ˜¯å¦ä¸ºä¸“é•¿æŠ€èƒ½
                    if (currentArchetype && archetypes[currentArchetype].specialties.includes(skill)) {
                        skillItem.classList.add('specialty');
                    }

                    const label = document.createElement('label');
                    label.textContent = skill;
                    
                    const input = document.createElement('input');
                    input.type = 'number';
                    input.min = '0';
                    input.max = '80';
                    input.value = skillValues[skill];
                    input.dataset.skill = skill;
                    input.oninput = (e) => updateSkill(skill, parseInt(e.target.value) || 0);

                    skillItem.appendChild(label);
                    skillItem.appendChild(input);
                    categoryDiv.appendChild(skillItem);
                });

                skillsGrid.appendChild(categoryDiv);
            });
        }

        // æ›´æ–°æŠ€èƒ½å€¼
        function updateSkill(skill, value) {
            const remainingPoints = 400 - Object.values(skillValues).reduce((sum, val) => sum + val, 0) + skillValues[skill];
            
            if (value > 80) {
                alert('å•ä¸ªæŠ€èƒ½ä¸èƒ½è¶…è¿‡80ç‚¹');
                document.querySelector(`input[data-skill="${skill}"]`).value = skillValues[skill];
                return;
            }
            
            if (value > remainingPoints) {
                alert('æŠ€èƒ½ç‚¹ä¸è¶³');
                document.querySelector(`input[data-skill="${skill}"]`).value = skillValues[skill];
                return;
            }

            skillValues[skill] = value;
            updateRemainingPoints();
        }

        // æ›´æ–°å‰©ä½™æŠ€èƒ½ç‚¹
        function updateRemainingPoints() {
            const totalUsed = Object.values(skillValues).reduce((sum, val) => sum + val, 0);
            const remaining = 400 - totalUsed;
            document.getElementById('remainingPoints').textContent = remaining;
        }

        // æ¸²æŸ“èƒŒæ™¯æ•…äº‹
        function renderBackground() {
            const backgroundSection = document.getElementById('backgroundSection');
            backgroundSection.innerHTML = '';

            if (!currentArchetype) return;

            const background = archetypes[currentArchetype].background;
            
            Object.keys(background).forEach(question => {
                const questionDiv = document.createElement('div');
                questionDiv.className = 'background-question';
                
                const questionTitle = document.createElement('h4');
                questionTitle.textContent = question;
                questionDiv.appendChild(questionTitle);

                const optionsDiv = document.createElement('div');
                optionsDiv.className = 'background-options';

                background[question].forEach((option, index) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'background-option';
                    
                    const radio = document.createElement('input');
                    radio.type = 'radio';
                    radio.name = question;
                    radio.value = option;
                    radio.id = `${question}_${index}`;
                    radio.onchange = () => {
                        backgroundChoices[question] = option;
                    };

                    const label = document.createElement('label');
                    label.textContent = option;
                    label.htmlFor = `${question}_${index}`;

                    optionDiv.appendChild(radio);
                    optionDiv.appendChild(label);
                    optionsDiv.appendChild(optionDiv);
                });

                questionDiv.appendChild(optionsDiv);
                backgroundSection.appendChild(questionDiv);
            });
        }

        // å¯¼å‡ºè§’è‰²æ•°æ®
        function exportCharacter() {
            if (!currentArchetype) {
                alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªè§’è‰²åŸå‹');
                return;
            }

            const characterData = {
                profile: {
                    name: document.getElementById('firstName').value || '',
                    surname: document.getElementById('lastName').value || '',
                    appearance: document.getElementById('appearance').value || '',
                    archetype: currentArchetype
                },
                attributes: archetypes[currentArchetype].attributes,
                occult_attributes: {
                    obsession: 0,
                    fear: 0
                },
                skills: {
                    social: {},
                    practical: {},
                    occult: {}
                },
                specialties: archetypes[currentArchetype].specialties,
                background: backgroundChoices,
                inventory: inventoryItems.filter(item => item.name.trim() !== '')
            };

            // æ•´ç†æŠ€èƒ½æ•°æ®
            skillCategories["ç¤¾äº¤"].forEach(skill => {
                characterData.skills.social[skill] = skillValues[skill];
            });
            skillCategories["å®ç”¨"].forEach(skill => {
                characterData.skills.practical[skill] = skillValues[skill];
            });
            skillCategories["ç¥ç§˜å­¦"].forEach(skill => {
                characterData.skills.occult[skill] = skillValues[skill];
            });

            // ä¸‹è½½JSONæ–‡ä»¶
            const dataStr = JSON.stringify(characterData, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `${characterData.profile.name || 'è§’è‰²'}_${currentArchetype}.json`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }

        // åˆå§‹åŒ–ç‰©å“æ 
        function initializeInventory() {
            inventoryItems = [];
            renderInventory();
        }

        // æ·»åŠ ç‰©å“
        function addInventoryItem() {
            const newItem = {
                id: Date.now() + Math.random(),
                name: '',
                quantity: 1,
                weight: 0
            };
            inventoryItems.push(newItem);
            renderInventory();
            
            // èšç„¦åˆ°æ–°æ·»åŠ çš„ç‰©å“åç§°è¾“å…¥æ¡†
            setTimeout(() => {
                const nameInput = document.querySelector(`input[data-item-id="${newItem.id}"][data-field="name"]`);
                if (nameInput) {
                    nameInput.focus();
                }
            }, 100);
        }

        // ç§»é™¤ç‰©å“
        function removeInventoryItem(itemId) {
            inventoryItems = inventoryItems.filter(item => item.id !== itemId);
            renderInventory();
        }

        // æ›´æ–°ç‰©å“å±æ€§
        function updateInventoryItem(itemId, field, value) {
            const item = inventoryItems.find(item => item.id === itemId);
            if (item) {
                if (field === 'quantity' || field === 'weight') {
                    // ç¡®ä¿æ•°å€¼å­—æ®µä¸ºæ•°å­—ç±»å‹
                    item[field] = parseFloat(value) || 0;
                } else {
                    item[field] = value;
                }
            }
        }

        // æ¸²æŸ“ç‰©å“æ 
        function renderInventory() {
            const inventoryList = document.getElementById('inventoryList');
            
            if (inventoryItems.length === 0) {
                inventoryList.innerHTML = `
                    <div class="inventory-empty">
                        <p>æš‚æ— ç‰©å“ï¼Œç‚¹å‡»ä¸Šæ–¹"æ·»åŠ ç‰©å“"æŒ‰é’®å¼€å§‹æ·»åŠ </p>
                    </div>
                `;
                return;
            }

            // æ·»åŠ è¡¨å¤´
            let html = `
                <div class="inventory-header-row">
                    <div class="header-name">ç‰©å“åç§°</div>
                    <div class="header-quantity">æ•°é‡</div>
                    <div class="header-weight">é‡é‡(kg)</div>
                    <div class="header-action">æ“ä½œ</div>
                </div>
            `;

            html += inventoryItems.map(item => `
                <div class="inventory-item">
                    <div class="inventory-item-name">
                        <input 
                            type="text" 
                            placeholder="è¾“å…¥ç‰©å“åç§°" 
                            value="${item.name}"
                            data-item-id="${item.id}"
                            data-field="name"
                            oninput="updateInventoryItem(${item.id}, 'name', this.value)"
                        >
                    </div>
                    <div class="inventory-item-quantity">
                        <input 
                            type="number" 
                            placeholder="1" 
                            value="${item.quantity}"
                            min="0"
                            step="1"
                            data-item-id="${item.id}"
                            data-field="quantity"
                            oninput="updateInventoryItem(${item.id}, 'quantity', this.value)"
                        >
                    </div>
                    <div class="inventory-item-weight">
                        <input 
                            type="number" 
                            placeholder="0.0" 
                            value="${item.weight}"
                            min="0"
                            step="0.1"
                            data-item-id="${item.id}"
                            data-field="weight"
                            oninput="updateInventoryItem(${item.id}, 'weight', this.value)"
                        >
                    </div>
                    <button 
                        type="button" 
                        class="btn-remove-item" 
                        onclick="removeInventoryItem(${item.id})"
                        title="åˆ é™¤ç‰©å“"
                    >
                        åˆ é™¤
                    </button>
                </div>
            `).join('');

            // è®¡ç®—æ€»é‡é‡
            const totalWeight = inventoryItems.reduce((sum, item) => sum + (item.weight * item.quantity), 0);
            html += `
                <div class="inventory-summary">
                    <span class="summary-text">æ€»é‡é‡: <strong>${totalWeight.toFixed(1)} kg</strong></span>
                    <span class="summary-count">ç‰©å“æ€»æ•°: <strong>${inventoryItems.length}</strong></span>
                </div>
            `;

            inventoryList.innerHTML = html;
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>